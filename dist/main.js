!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e){!function(){var t=window.localStorage,e="wins",i={};t&&(i=JSON.parse(t.getItem(e))||{});var n=document.getElementById("canvas"),o=n.getContext("2d");o.font="30px Arial";var r=1,a=parseInt(n.getAttribute("width"),10),l=parseInt(n.getAttribute("height"),10),s=20,u=3,c=0,f={winner:null,gameOverStart:null,statScreenStart:null},p=function(){var t=0;return function(){return++t}}();function h(t,e){return Math.random()*(e-t)+t}function d(t){return{alive:!0,color:t,direction:{x:h(.1,.5),y:h(.1,.5)},id:p(),position:{x:h(s,a-s),y:h(s,l-s)},size:{width:s,height:s},team:t,hitPoints:10,heals:3,strength:Math.ceil(h(1,3))}}function m(){for(var t=[],e=0;e<u;e++)t=t.concat([d("red"),d("blue"),d("green"),d("yellow"),d("orange"),d("teal"),d("brown")]);return{frame:{collisions:[]},objects:t,input:{}}}var y=m();function w(){o.fillStyle="black",o.fillRect(0,0,a,l)}function x(t){if(w(),o.font="30px Arial",c=t,i&&t-f.statScreenStart<3e3){o.fillStyle="white";var e=50;for(var n in o.fillText("Wins:",10,e),i)e+=30,o.fillStyle=n,o.fillText(n+" : "+i[n],10,e);requestAnimationFrame(x)}else requestAnimationFrame(g)}function g(t){w(),c=t,y=new m,requestAnimationFrame(A)}function v(t,e){t.hitPoints-=e,t.hitPoints<=0&&(t.alive=!1)}function b(t,e){t.hitPoints<10&&(t.hitPoints+=e.heals,e.heals--,t.hitPoints>10&&(t.hitPoints=10),e.heals<0&&(e.heals=0))}function S(t){w(),c=t,o.font="30px Arial",o.fillStyle="white",o.fillText("Game Over, winner: "+f.winner,10,50),t-f.gameOverStart>2e3?(f.statScreenStart=t,requestAnimationFrame(x)):requestAnimationFrame(S)}function A(n){w(),y.frame.collisions=[],y.objects.forEach(function(t){!function(t){t.alive&&(o.fillStyle="white",o.font="10px Arial",o.fillText(t.hitPoints+"/"+t.strength,t.position.x,t.position.y-10)),o.fillStyle=t.color,o.fillRect(t.position.x,t.position.y,t.size.width,t.size.height)}(t)}),r=y.input.ArrowUp?2:y.input.ArrowDown?.5:1;var s=(n-c)*r;y.objects.forEach(function(t){!function(t,e){null!=t.direction&&t.alive&&(t.position.x+=e*t.direction.x,t.position.y+=e*t.direction.y,(t.position.x+t.size.width>a||t.position.x<0)&&(t.direction.x*=-1),(t.position.y+t.size.height>l||t.position.y<0)&&(t.direction.y*=-1),t.position.y<0&&(t.position.y=0),t.position.y>l-t.size.height&&(t.position.y=l-t.size.height),t.position.x<0&&(t.position.x=0),t.position.x>a-t.size.width&&(t.position.x=a-t.size.width),y.objects.forEach(function(e){e.id!==t.id&&(e.alive&&function(t,e){return t.position.x<e.position.x+e.size.width&&t.position.x+t.size.width>e.position.x&&t.position.y<e.position.y+e.size.height&&t.size.height+t.position.y>e.position.y}(t,e)?t.team!==e.team?(Math.random()<.5?v(t,e.strength):v(e,t.strength),t.color="white",e.color="white",y.frame.collisions.push([t,e])):(b(t,e),b(e,t)):(t.color=t.team,e.color=e.team))}))}(t,s)}),c=n;var u=y.objects.filter(function(t){return t.alive}).reduce(function(t,e){return-1===t.indexOf(e.team)&&t.push(e.team),t},[]);1!==u.length?requestAnimationFrame(A):(!function(n){f.winner=n,i[f.winner]?i[f.winner]++:i[f.winner]=1,t&&t.setItem(e,JSON.stringify(i))}(u[0]),f.gameOverStart=n,requestAnimationFrame(S))}requestAnimationFrame(function(t){w(),c=t,document.onkeydown=function(t){t.preventDefault(),y.input[t.code]||(y.input[t.code]={key:t,pressed:Date.now()})},document.onkeyup=function(t){t.preventDefault(),y.input[t.code]=null},requestAnimationFrame(A)})}()}]);